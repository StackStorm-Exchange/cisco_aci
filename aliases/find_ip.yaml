---
name: "find_ip"
pack: "cisco_aci"
action_ref: "cisco_aci.find_ip"
description: "Find an IP address in the ACI fabric"

# Accept these formats as input
formats:
  - "aci find ip {{ ip }} on {{ apic }}"

# Just let the user know something is happening
ack:
  format: "Working..."

# There may be multiple entries - for each entry, return the following data
result:
  format: |
      Action completed!
      {% for entry in execution.result.result.imdata -%}
       mac : {{ entry.fvCEp.attributes.mac }}
       ip : {{ entry.fvCEp.attributes.ip }}
       node-rn : {{ entry.fvCEp.children[0].fvIp.children[0].fvReportingNode.attributes.rn }}
       node-id : {{ entry.fvCEp.children[0].fvIp.children[0].fvReportingNode.attributes.id }}
       dn : {{ entry.fvCEp.attributes.dn }}
      {%+ endfor %}
